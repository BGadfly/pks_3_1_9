# pks_3_1_9

Коротаева ЕА
ЭФБО-06-23

1 контрольная точка
проект supabase с police
![скрин 1](https://github.com/user-attachments/assets/d392b11a-de0c-4670-9356-29f78dce8e56)

2 контрольная точка
экран входа и экран списка

![скрин 2](https://github.com/user-attachments/assets/066950d9-3984-4975-813f-9c08a2a66e27)
![скрин 3](https://github.com/user-attachments/assets/552d8290-0dfe-4358-9ddf-80966d0783fc)

3 контрольная точкасоздание 
заметки редактирование удаление

![скрин 4](https://github.com/user-attachments/assets/5a990ae5-6e8e-4525-8988-5fcb73ed70b5)
![скрин 5](https://github.com/user-attachments/assets/590946d4-46d6-47c1-97ba-c02519368d73)
![скрин 6](https://github.com/user-attachments/assets/eb5667d7-29d7-41c4-8650-dc815fb47f09)


как подключали Supabase (шаги, ключи, URL — без публикации приватных секретов)?
  зарегистрировалась, создала организацию, создала проект, скопировала url и anon public из Settings -> API

какие зависимости и где инициализация
  добавила зависимость supabase_flutter: 2.0.0, остальные зависимости стандартные
  инициализация выполняется в main до запуска приложения при помощи Supabase.initialize(). Потом экземпляр клиента доступен через supabase.initialize.client

структура таблицы и RLS-политики
  <img width="2880" height="1920" alt="image" src="https://github.com/user-attachments/assets/0808ce69-399c-4655-9367-138b1f72beb2" />
  <img width="2880" height="1920" alt="image" src="https://github.com/user-attachments/assets/629a671a-8233-430b-82c6-b16a424cb7e4" />

с какими ошибками столкнулись и как решили
  несколько мелких ошибок при аутентификации, все исправлено


Контрольные вопросы
1. Зачем в stream() указывать primaryKey?
primaryKey нужен для идентификации уникальных записей при обработке realtime-событий. Без него Supabase не сможет корректно обновлять, добавлять или удалять элементы в списке, что приведёт к некорректному отображению данных.

2. Stream() vs select()
stream() предоставляет реальное время обновлений через WebSocket, а select() — разовое получение данных. Используйте stream() для динамических данных (чаты, уведомления), а select() — для статичных или однократных запросов.

3. Что такое RLS и почему она обязательна?
RLS (Row Level Security) — механизм PostgreSQL для ограничения доступа к строкам таблицы. В Supabase RLS обязательна для клиентского доступа, чтобы предотвратить несанкционированный доступ к данным других пользователей.

4. Связь auth.uid() и user_id. Зачем WITH CHECK?
auth.uid() возвращает ID текущего пользователя, который сохраняется в user_id для связи записей. WITH CHECK гарантирует, что при вставке или обновлении записей user_id соответствует аутентифицированному пользователю.

5. Пагинация и поиск без перегрузки Realtime
Для пагинации используйте select() с range(), а для поиска — select() с ilike(). Realtime-канал оставьте только для основного списка, чтобы избежать избыточных подписок на временные данные.

